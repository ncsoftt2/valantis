"use strict";(self.webpackChunkvalantis=self.webpackChunkvalantis||[]).push([[24],{24:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var c=r(3);const s=()=>(0,c.wA)(),d=c.d4;var i=r(475),a=r(43),o=r(326);const n={products_list:"ProductPage_products_list__K5pHZ",products:"ProductPage_products__mNxt3",product:"ProductPage_product__dxgKn",btns_wrapper:"ProductPage_btns_wrapper__S1Gr4",btn:"ProductPage_btn__fVT7Q",product_title:"ProductPage_product_title__lUT1V",product_brand:"ProductPage_product_brand__ap8VK",product_price_item:"ProductPage_product_price_item__XIGPe",product_id:"ProductPage_product_id__KbvKQ",SliderRoot:"ProductPage_SliderRoot__IND4m",SliderTrack:"ProductPage_SliderTrack__-SL2M",SliderRange:"ProductPage_SliderRange__NHi-9",SliderThumb:"ProductPage_SliderThumb__7xohQ"};var u=r(579);const l=(0,a.memo)((()=>{const[e,t]=(0,i.ok)({}),r=d((e=>e.products.brands)),c=s(),[n,l]=(0,a.useState)(r[0]);return(0,a.useEffect)((()=>{c(o.E.fetchProductsBrand())}),[]),console.log(n),(0,u.jsx)("div",{children:(0,u.jsxs)("select",{onChange:r=>{e.delete("offset"),e.delete("product"),e.delete("price"),e.set("brand",r.currentTarget.value),t(e);const s={action:"filter",params:{brand:r.currentTarget.value}};c(o.E.fetchIdsProduct(s))},children:[(0,u.jsx)("option",{value:n,disabled:!0,children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0431\u0440\u0435\u043d\u0434"}),r.map((e=>(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("option",{children:e},e)})))]})})})),p=()=>{const e=s(),t=d((e=>e.products.ids)),[r,c]=(0,i.ok)({}),p=Number(r.get("offset"))||0,m=Number(r.get("limit"))||50,f=null===r.get("price")?void 0:Number(r.get("price")),[g,h]=(0,a.useState)(""),{action:P,param2:x,initialKey:b}=(()=>{const e=new URLSearchParams(window.location.search),t=e.keys();let r=t.next().value;for(;"action"===r;)r=t.next().value;return{action:e.get("action")||"get_ids",param2:e.get("product")||Number(e.get("price"))||e.get("brand")||"",initialKey:r}})();return(0,a.useEffect)((()=>{const t={action:P,params:{[b]:x,offset:p,limit:m}};e(o.E.fetchIdsProduct(t))}),[p]),(0,u.jsxs)("section",{className:n.products_list,children:[(0,u.jsxs)("div",{className:n.filterWrapper,children:[(0,u.jsx)("input",{value:g,onChange:e=>{const t=e.currentTarget.value;h(t.trim())}}),(0,u.jsx)("button",{onClick:()=>{if(0!==g.trim().length){r.delete("offset"),r.delete("price"),r.set("action","filter"),r.set("product",g.trim()),c(r);const t={action:"filter",params:{product:g.trim(),limit:m,offset:p}};e(o.E.fetchIdsProduct(t))}},children:"\u043f\u043e\u0438\u0441\u043a"})]}),(0,u.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,u.jsx)("input",{type:"number",value:f,onChange:t=>{const s=Number(t.currentTarget.value);r.set("action","filter"),r.set("price",s.toString()),r.delete("offset"),r.delete("product"),c(r);const d={action:"filter",params:{price:s,limit:m,offset:p}};e(o.E.fetchIdsProduct(d))}})}),(0,u.jsx)("button",{onClick:()=>{c({});const t={action:"get_ids",params:{limit:m,offset:p}};e(o.E.fetchIdsProduct(t))},children:"\u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c"}),(0,u.jsx)(l,{}),(0,u.jsx)("div",{className:n.products,children:t&&t.length>0&&(0,u.jsx)(_,{})})]})},_=()=>{const e=d((e=>e.products.products)),t=d((e=>e.products.ids)),r=s();return(0,a.useEffect)((()=>{r(o.E.fetchProducts(t))}),[t]),(0,u.jsx)(u.Fragment,{children:e.map((e=>(0,u.jsxs)("div",{className:n.product,children:[(0,u.jsx)("div",{className:n.product_title,children:e.product}),(0,u.jsx)("div",{className:n.product_id,children:e.id}),(0,u.jsxs)("div",{className:n.product_brand,children:["\u0431\u0440\u0435\u043d\u0434: ",e.brand||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"]}),(0,u.jsxs)("div",{className:n.product_price,children:["\u0446\u0435\u043d\u0430: ",(0,u.jsx)("span",{className:n.product_price_item,children:e.price.toLocaleString("ru-RU")})]})]},e.id)))})}}}]);
//# sourceMappingURL=24.30e942d3.chunk.js.map